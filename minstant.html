<head>
  <title>minstant</title>
</head>

<body>
</body>

<!-- this is the main template used by iron:router to build the page -->
<template name="ApplicationLayout">

    <div class="background-div"></div>


	<div style="{position:absolute; width: 100%; top: 0}" >
        {{> yield "header"}}
    </div>

	
	<div class="container body custom-row scroll-y "
         >
        {{> yield "main"}}

	</div>

</template>

<!-- top level template for the nav bar -->
<template name="navbar">
<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        Minstant!
      </a>
    </div>
    <div class="nav navbar-nav">
    {{> loginButtons}}
</div>
  </div>
</nav>
</template>

<!-- Top level template for the lobby page -->
<template name="lobby_page">
	{{> available_user_list}}
</template>


<!-- display a list of users -->
<template name="available_user_list">
	<h2>Choose someone to chat with:</h2>
	<div class="row">
	{{#each users}}
	{{> available_user}}
	{{/each}}
</div>
</template>

<!-- display an individual user -->
<template name="available_user">
	<div class="col-md-2 col-sm-3 col-xs-4">
		<div class="user_avatar" style="{width: 80px; margin-bottom: 10px}">
			{{#if isMyUser _id}} 
			<div >

                {{> avatar user=this size="large" shape="circle" }}
                You: {{getUsername _id}}
			</div>
			{{else}}
			<a style="{font-weight: bold}" href="/chat/{{_id}}">

                {{> avatar user=this size="large" shape="circle" }}
                {{getUsername _id}}
			</a>
			{{/if}}
		</div>
	</div>

</template>


<!-- Top level template for the chat page -->
<template name="chat_page">

    <div  style="{background-color: rgba(28, 114, 187, 0.56); height:100%; padding:  15px}">

        <div class="left-panel hidden-sm hidden-xs" >
                {{> all_users }}
        </div>


        <div class="well main-panel" style="{margin-bottom: 0; background-color: #d8d8d8;}">
            <div>
                <div id="chatContainer" class="well row well-lg all-messages " style="{height: 100%; margin-left: -10px; min-width: 500px}">
                    <p class="chatContent">
                        {{#each chat_messages}}
                        {{> chat_message}}
                        {{/each}}
                    </p>

                </div>
            </div>
            <div class="{{#if currentUser }}{{else}}disabled-form{{/if}}" >
                <form class="js-send-chat col-xs-12"

                      id="submitChatForm">
                    <div class="well row col-xs-12" style="{width: 500px; margin-left: -10px}">
                        <div >
                                <textarea id="textAreaNewChat" class="form-control custom-control"
                                          name="chat"
                                          placeholder="Enter your message..."
                                          rows="3"
                                          style="{float: left; resize: none}"
                                        ></textarea>
                        </div>
                        {{#if currentUser}}

                        {{else}}
                            <h5>Please login to post chat messages</h5>
                        {{/if}}

                        <div style="{width: 205px; float: left}">
                            {{> emoticons callback=selectEmoticonCallback}}
                        </div>
                        <br/>
                        <div>

                            <button type="submit" class="btn btn-default submit-chat-btn">send</button>
                        </div>
                    </div>
                </form>

            </div>
        </div>

    </div>
</template>

<!-- simple template that displays a message -->
<template name="chat_message">
    <div class="row">
        {{#if isSecondUser}}
            <span class="avatar_chat_display col-xs-2">{{> avatar user=user size="mySize" shape="circle"}}</span>
        {{/if}}
        <span class="chat-message-wrapper col-xs-10 {{#if isSecondUser}} bubble2 {{/if }} {{#if isCurrentUser}}bubble {{/if }}">
            {{text}}</span>

        {{#if isCurrentUser}}
                <span class="avatar_chat_display col-xs-2">{{> avatar user=user shape="circle"}}</span>
        {{/if}}
    </div>
	<br>
</template>



