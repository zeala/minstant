<head>
  <title>minstant</title>
</head>

<body>
</body>

<!-- this is the main template used by iron:router to build the page -->
<template name="ApplicationLayout">
	{{> yield "header"}}
	
	<div class="container">
        <div class="row col-xs-12">
            <div class="left-panel">
            {{> yield "left"}}
            </div>
            <div  class="main-panel">
                {{> yield "main"}}
            </div>

        </div>

	</div>

</template>

<!-- top level template for the nav bar -->
<template name="navbar">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header">
      <a class="navbar-brand" href="/">
        Minstant!
      </a>
    </div>
    <div class="nav navbar-nav">
    {{> loginButtons}}
</div>
  </div>
</nav>
</template>

<!-- Top level template for the lobby page -->
<template name="lobby_page">
	{{> available_user_list}}
</template>

<template name="all_users">
    <div class="well">
        <ul class="unstyled all-users-left-panel">
            {{#each users}}
                <div class="row all-users-list-item">
                    <a href="/chat/{{_id}}">
                        <div class="col-xs-2">
                            {{> avatar user=this size="extra-small" shape="circle" }}
                        </div>
                        <div class="col-xs-10">
                            {{ displayUserName _id}}
                        </div>
                    </a>
                </div>
            {{/each}}
        </ul>
    </div>
</template>

<!-- display a list of users -->
<template name="available_user_list">
	<h2>Choose someone to chat with:</h2>
	<div class="row">
	{{#each users}}
	{{> available_user}}
	{{/each}}
</div>
</template>

<!-- display an individual user -->
<template name="available_user">
	<div class="col-md-2">
		<div class="user_avatar">
			{{#if isMyUser _id}} 
			<div class="bg-success">{{getUsername _id}} (YOU)
				<br/>
				<img src="/{{userImage _id}}" class="avatar_img">
			</div>
			{{else}}
			<a href="/chat/{{_id}}">
				{{getUsername _id}}
				<br/>
				<img src="/{{userImage _id}}" class="avatar_img">
			</a>
			{{/if}}
		</div>
	</div>

</template>


<!-- Top level template for the chat page -->
<template name="chat_page">
	<div class="row">
		<div class="col-md-12">
			<div id="chatContainer" class="well well-lg all-messages ">
				<p class="chatContent">
					{{#each chat_messages}}
					{{> chat_message}}
					{{/each}}
				</p>

			</div>	
		</div>
	</div>
    <div class="row">
		<div class="col-md-12">
            {{#if currentUser}}
			<form class="js-send-chat col-xs-12" id="submitChatForm">
                <div class="row col-xs-12" style="{width: 500px; overflow: hidden}">
                    <div style="{float: left; width: 250px; margin-right: 12px}">
                    <textarea id="textAreaNewChat" class="form-control custom-control"
                              name="chat"
                              placeholder="Enter your message..."
                              rows="3"
                              style="{float: left; resize: none}"
                            ></textarea>
                    </div>
                    <div style="{width: 205px; float: left}">
                        {{> emoticons callback=selectEmoticonCallback}}
                    </div>
                    <br/>
                    <div>

                        <button type="submit" class="btn btn-default submit-chat-btn">send</button>
                    </div>
                </div>
		</form>
            {{else}}
                <h5>Please login to post chat messages</h5>
            {{/if}}

        </div>
	</div>
</template>

<!-- simple template that displays a message -->
<template name="chat_message">
    <div class="row">
        {{#if isSecondUser}}
            <span class="avatar_chat_display col-xs-2">{{> avatar user=user size="mySize" shape="circle"}}</span>
        {{/if}}
        <span class="chat-message-wrapper col-xs-10 {{#if isSecondUser}}bubble2 {{/if }} {{#if isCurrentUser}}bubble {{/if }}">
            {{text}}</span>

        {{#if isCurrentUser}}
                <span class="avatar_chat_display col-xs-2">{{> avatar user=user shape="circle"}}</span>
        {{/if}}
    </div>
	<br>
</template>



